{% load static tailwind_tags i18n %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
          rel="stylesheet">
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"/>
    <title>ANGKOR MANAGEMENT - Optimized rental management</title>
    <meta name="description"
          content="ANGKOR MANAGEMENT offers comprehensive rental management solutions in Cambodia, guaranteeing profitability, peace of mind and security for your rentals. Discover our services adapted to your needs."/>
    <script src="https://kit.fontawesome.com/33a775bcdb.js" crossorigin="anonymous" defer></script>
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.1/dist/aos.css" rel="stylesheet"/>
    {% tailwind_css %}
</head>

<body class="bg-black">
{% include '_header.html' %}
<main>
    {% block content %}
    {% endblock %}
</main>
{% include '_footer.html' %}

<script src="https://cdn.jsdelivr.net/npm/aos@2.3.1/dist/aos.js" defer></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js" defer></script>

<script defer>
    document.addEventListener("DOMContentLoaded", function () {
        // Initialisation de l'animation AOS
        AOS.init();

        // Sélection et application de la langue choisie
        var languageSelector = document.getElementById("languageSelector");
        if (languageSelector) {
          var selectedLanguage = "{{ request.LANGUAGE_CODE }}";
          languageSelector.value = selectedLanguage;
        }
        
        // Fonction pour sauvegarder la position de défilement et soumettre le formulaire
        window.saveScrollPositionAndSubmitForm = function (selectElement) {
          localStorage.setItem("scrollPosition", window.pageYOffset || document.documentElement.scrollTop);
          selectElement.form.submit();
        };
        
        // Restaurer la position de défilement précédemment sauvegardée après rechargement
        var scrollPosition = localStorage.getItem("scrollPosition");
        if (scrollPosition) {
          window.scrollTo(0, scrollPosition);
          localStorage.removeItem("scrollPosition");
        }
    });

    $(document).ready(function () {
        // Validation des champs de formulaire
        var nameRegex = /^[a-zA-Z\s]+$/;
        var phoneRegex = /^[0-9\s\-\(\)]+$/;
        var maxChars = 1000;
        
        function validateField(fieldId, regex, errorMsgId, errorMsg) {
            $(fieldId).blur(function () {
                var fieldValue = $(this).val();
                if (!regex.test(fieldValue)) {
                    $(errorMsgId).text(errorMsg).show();
                } else {
                    $(errorMsgId).hide();
                }
            });
        }
        
        // Validation spécifique pour chaque champ
        validateField("#id_email", /^[^\s@]+@[^\s@]+\.[^\s@]+$/, "#error_email", "Please enter a valid email address.");
        validateField("#id_first_name", nameRegex, "#error_first_name", "Please enter a valid name with letters only.");
        validateField("#id_last_name", nameRegex, "#error_last_name", "Please enter a valid name with letters only.");
        validateField("#id_phone", phoneRegex, "#error_phone", "Please enter a valid phone number with digits only.");
        
        // Gestion du compteur de caractères pour le champ de message
        $("#id_message").on("input", function () {
            var currentLength = $(this).val().length;
            $("#char_count").text(currentLength + "/" + maxChars);
            if (currentLength > maxChars) {
                $(this).val($(this).val().substr(0, maxChars));
            }
        });
    });
</script>
</body>
</html>










{% comment %} {% load static tailwind_tags i18n %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
    <title>ANGKOR MANAGEMENT - Optimized rental management</title>
    <meta
      name="description"
      content="ANGKOR MANAGEMENT offers comprehensive rental management solutions in Cambodia, guaranteeing profitability, peace of mind and security for your rentals. Discover our services adapted to your needs."
    />
    <script
      src="https://kit.fontawesome.com/33a775bcdb.js"
      crossorigin="anonymous"
    ></script>

    <link
      href="https://cdn.jsdelivr.net/npm/aos@2.3.1/dist/aos.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.1/dist/aos.js"></script>
    {% tailwind_css %}
  </head>


  <body class="bg-black">

    
    {% include '_header.html' %}

    <main>
      {% block content %}
      {% endblock %}
    </main>

    {% include '_footer.html' %}

    <script>
      document.addEventListener("DOMContentLoaded", function () {

        // Sélection et application de la langue choisie
        var languageSelector = document.getElementById("languageSelector");

        if (languageSelector) {
          var selectedLanguage = "{{ request.LANGUAGE_CODE }}";
          languageSelector.value = selectedLanguage;
        }

        // Fonction pour sauvegarder la position de défilement et soumettre le formulaire
        window.saveScrollPositionAndSubmitForm = function (selectElement) {
          localStorage.setItem(
            "scrollPosition",
            window.pageYOffset || document.documentElement.scrollTop
          );
          selectElement.form.submit();
        };

        // Restaurer la position de défilement précédemment sauvegardée après rechargement
        var scrollPosition = localStorage.getItem("scrollPosition");

        if (scrollPosition) {
          window.scrollTo(0, scrollPosition);
          localStorage.removeItem("scrollPosition");
        }
      });
    </script>

    <script>
      // animation 
      AOS.init();
    </script>

<!-- Chargement de jQuery s'il n'est pas déjà chargé -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>
  $(document).ready(function () {
    // Expressions régulières pour la validation des champs

    // Lettres et espaces uniquement pour les noms
    var nameRegex = /^[a-zA-Z\s]+$/; 

    // Chiffres, espaces, tirets et parenthèses pour les numéros de téléphone
    var phoneRegex = /^[0-9\s\-\(\)]+$/; 
    
    // Nombre maximum de caractères autorisés pour le message
    var maxChars = 1000; 

    // Fonction pour valider les champs du formulaire
    function validateField(fieldId, regex, errorMsgId, errorMsg) {
      $(fieldId).blur(function () {
        var fieldValue = $(this).val();

        if (fieldValue && !regex.test(fieldValue)) {

          // Affiche le message d'erreur si la valeur du champ n'est pas valide
          $(errorMsgId).text(errorMsg).show(); 

        } else {

          // Cache le message d'erreur si la valeur du champ est valide
          $(errorMsgId).hide(); 
        }
      });
    }

    // Application de la validation pour chaque champ
    validateField(
      "#id_email",
      /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
      "#error_email",
      '{% trans "Please enter a valid email address." %}'
    );

    validateField(
      "#id_first_name",
      nameRegex,
      "#error_first_name",
      '{% trans "Please enter a valid name with letters only." %}'
    );

    validateField(
      "#id_last_name",
      nameRegex,
      "#error_last_name",
      '{% trans "Please enter a valid name with letters only." %}'
    );

    validateField(
      "#id_phone",
      phoneRegex,
      "#error_phone",
      '{% trans "Please enter a valid phone number with digits only." %}'
    );

    // Gestion du compteur de caractères pour le champ de message
    $("#id_message").on("input", function () {
      var currentLength = $(this).val().length;

      // Mise à jour du compteur
      $("#char_count").text(currentLength + "/" + maxChars); 

      // Changement de couleur du compteur selon la longueur du message
      if (currentLength >= maxChars) {

        // Rouge si le maximum est atteint ou dépassé
        $("#char_count").css("color", "red"); 
      } else if (currentLength > 900) {

        // Orange si proche du maximum
        $("#char_count").css("color", "orange"); 
      } else {

        // Blanc par défaut
        $("#char_count").css("color", "white"); 
      }

      // Empêche l'ajout de caractères au-delà du maximum autorisé
      if (currentLength > maxChars) {
        $(this).val($(this).val().substr(0, maxChars));
      }
    });
  });
</script>
  </body>
</html> {% endcomment %}
